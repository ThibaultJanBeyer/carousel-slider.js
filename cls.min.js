/* -------------------------------------------------------------
The MIT License (MIT)
* VERSION: 0.1.1
* Copyright (c) 2015, Thibault Jan Beyer
* Website: http://www.thibaultjanbeyer.com/
* Example: http://kit.thibaultjanbeyer.com/tools/carousel-slider.js/
* Github: https://github.com/ThibaultJanBeyer/carousel-slider.js/
------------------------------------------------------------- */
$(function(){function t(){this.removeEventListener("touchmove",e),this.removeEventListener("touchend",t),s=!1}function e(e){if($.detectSwipe.preventDefault&&e.preventDefault(),s){var i,n=e.touches[0].pageX,o=e.touches[0].pageY,c=a-n,g=r-o;Math.abs(c)>=$.detectSwipe.threshold?i=c>0?"left":"right":Math.abs(g)>=$.detectSwipe.threshold&&(i=g>0?"down":"up"),i&&(t.call(this),$(this).trigger("swipe",i).trigger("swipe"+i))}}function i(i){1==i.touches.length&&(a=i.touches[0].pageX,r=i.touches[0].pageY,s=!0,this.addEventListener("touchmove",e,!1),this.addEventListener("touchend",t,!1))}function n(){this.addEventListener&&this.addEventListener("touchstart",i,!1)}$.detectSwipe={version:"2.1.1",enabled:"ontouchstart"in document.documentElement,preventDefault:!0,threshold:20};var a,r,s=!1;$.event.special.swipe={setup:n},$.each(["left","up","down","right"],function(){$.event.special["swipe"+this]={setup:function(){$(this).on("swipe",$.noop)}}});var o=[],c=[],g=[],h=[],l=[],f=[],d=[],u=[],p=[],m=[],w=[],L=[],v=[],k=[],y=[],b=[],x=[],E=[],S=[],I=[],D=[],R=[],T=[],C=[],Y=[],J=[],M=[],N=[],O=[],X=[],z=[],A=[],j=[];$(".carousel-slider").each(function(t,e){function i(){v[t]===!0&&(N[t]=setInterval(function(){O[t]=!0,c[t].animate({marginLeft:"-="+S[t]+"%"},k[t]/2).delay(k[t]/5).animate({marginLeft:"-="+I[t]+"%"},k[t],function(){M[t]++,M[t]<1?(M[t]=D[t],c[t].css({marginLeft:"-"+J[t]+"%"})):M[t]>D[t]&&(M[t]=1,c[t].css({marginLeft:"-"+Y[t]+"%"})),O[t]=!1})},y[t]))}function n(){clearInterval(N[t])}o[t]=$(this),c[t]=o[t].children(".inner"),g[t]=c[t].children(".slide"),h[t]=g[t].children(".content"),l[t]=o[t].children(".arrow"),f[t]=o[t].children(".arrow.left"),d[t]=o[t].children(".arrow.right"),m[t]=o[t].children(".play"),p[t]=o[t].children(".pause"),w[t]=o[t].attr("data-width"),L[t]=o[t].attr("data-height"),o[t].attr("data-autoplay")?v[t]=JSON.parse(o[t].attr("data-autoplay")):v[t]=!0,o[t].attr("data-speed")?k[t]=parseInt(o[t].attr("data-speed")):k[t]=1e3,o[t].attr("data-time")?y[t]=parseInt(o[t].attr("data-time")):y[t]=7e3,o[t].attr("data-overflow")?b[t]=o[t].attr("data-overflow"):b[t]="auto",o[t].attr("data-swipe")?x[t]=JSON.parse(o[t].attr("data-swipe")):x[t]=!0,o[t].css({width:w[t],height:L[t],position:"relative",overflow:"hidden"}),o[t].attr("tabindex","0"),D[t]=g[t].length,T[t]=D[t]-1,R[t]=D[t]+4,C[t]=100*R[t],E[t]=100/R[t],Y[t]=200,J[t]=100*(D[t]+1),M[t]=1,c[t].css({margin:"0",marginLeft:"-"+Y[t]+"%",display:"block",height:"100%",padding:"0",width:C[t]+"%"}),g[t].css({width:E[t]+"%",height:"100%",overflowY:b[t],"float":"left"}),g[t].width()<=200?(S[t]=20,u[t]=20):g[t].width()<=400?(S[t]=12,u[t]=35):g[t].width()>=1e3?(S[t]=4,u[t]=50):g[t].width()>=2e3?(S[t]=3,u[t]=55):g[t].width()>=3e3?(S[t]=2,u[t]=65):g[t].width()>=4e3?(S[t]=1,u[t]=65):g[t].width()>=5e3?(S[t]=.5,u[t]=70):(S[t]=5,u[t]=45),I[t]=100-S[t],l[t].css({width:u[t]+"px",height:"100%",position:"absolute",top:"0",zIndex:"5",cursor:"pointer",textAlign:"center"}),f[t].css({left:"0"}),d[t].css({right:"0"}),m[t].css({position:"absolute",right:u[t]+10+"px",bottom:0,cursor:"pointer"}),p[t].css({position:"absolute",right:u[t]+10+"px",bottom:0,cursor:"pointer"}),h[t].css({padding:"10px "+(u[t]+10)+"px"});var a;g[t].each(function(e,i){e++,1===e?$(this).clone().appendTo(c[t]):2===e&&$(this).clone().appendTo(c[t]),e===T[t]?a=$(this):e===D[t]&&($(this).clone().prependTo(c[t]),a.clone().prependTo(c[t]))}),O[t]=!1,X[t]=!1,z[t]=!1,f[t].on("mouseenter",function(){O[t]===!1&&X[t]===!1&&(X[t]=!0,n(),c[t].stop(!0,!0).animate({marginLeft:"+="+S[t]+"%"},k[t]/4))}).on("mouseleave",function(){z[t]=!0,O[t]===!1&&X[t]===!0&&(i(),c[t].stop(!0,!0).animate({marginLeft:"-="+S[t]+"%"},k[t]/4),X[t]=!1,z[t]=!1)}).on("click",function(){O[t]===!1&&X[t]===!0&&(O[t]=!0,c[t].animate({marginLeft:"+=100%"},k[t],function(){M[t]--,M[t]<1&&(M[t]=D[t],c[t].css({marginLeft:"-"+(J[t]-S[t])+"%"})),z[t]&&(i(),c[t].animate({marginLeft:"-="+S[t]+"%"},k[t]/4),z[t]=!1,X[t]=!1),O[t]=!1}),o[t].trigger("cls-clickLeft").trigger("cls-left"))}).on({touchstart:function(){X[t]=!0,O[t]===!1&&X[t]===!0&&(n(),O[t]=!0,c[t].animate({marginLeft:"+=100%"},k[t],function(){M[t]--,M[t]<1&&(M[t]=D[t],c[t].css({marginLeft:"-"+J[t]+"%"})),i(),c[t],z[t]=!1,X[t]=!1,O[t]=!1}),o[t].trigger("cls-touchLeft").trigger("cls-left"))}}),A[t]=!1,j[t]=!1,d[t].on("mouseenter",function(){O[t]===!1&&A[t]===!1&&(A[t]=!0,n(),c[t].stop(!0,!0).animate({marginLeft:"-="+S[t]+"%"},k[t]/4))}).on("mouseleave",function(){j[t]=!0,O[t]===!1&&A[t]===!0&&(i(),c[t].stop(!0,!0).animate({marginLeft:"+="+S[t]+"%"},k[t]/4),A[t]=!1,j[t]=!1)}).on("click",function(){O[t]===!1&&A[t]===!0&&(O[t]=!0,c[t].animate({marginLeft:"-=100%"},k[t],function(){M[t]++,M[t]>D[t]&&(M[t]=1,c[t].css({marginLeft:"-"+(Y[t]+S[t])+"%"})),j[t]&&(i(),c[t].animate({marginLeft:"+="+S[t]+"%"},k[t]/4),j[t]=!1,A[t]=!1),O[t]=!1}),o[t].trigger("cls-clickRight").trigger("cls-right"))}).on({touchstart:function(){A[t]=!0,O[t]===!1&&A[t]===!0&&(n(),O[t]=!0,c[t].animate({marginLeft:"-=100%"},k[t],function(){M[t]++,M[t]>D[t]&&(M[t]=1,c[t].css({marginLeft:"-"+Y[t]+"%"})),i(),c[t],j[t]=!1,A[t]=!1,O[t]=!1}),o[t].trigger("cls-touchRight").trigger("cls-right"))}}),g[t].on("swiperight",function(e){O[t]===!1&&x[t]===!0&&(n(),O[t]=!0,c[t].animate({marginLeft:"+=100%"},k[t],function(){M[t]--,M[t]<1&&(M[t]=D[t],c[t].css({marginLeft:"-"+J[t]+"%"})),O[t]=!1}),i(),o[t].trigger("cls-swipeRight").trigger("cls-left"))}).on("swipeleft",function(){O[t]===!1&&x[t]===!0&&(n(),O[t]=!0,c[t].animate({marginLeft:"-=100%"},k[t],function(){M[t]++,M[t]>D[t]&&(M[t]=1,c[t].css({marginLeft:"-"+Y[t]+"%"})),O[t]=!1}),i(),o[t].trigger("cls-swipeLeft").trigger("cls-right"))}),o[t].keydown(function(e){e.preventDefault(),39==e.keyCode?O[t]===!1&&x[t]===!0&&(O[t]=!0,n(),c[t].animate({marginLeft:"-=100%"},k[t],function(){M[t]++,M[t]>D[t]&&(M[t]=1,c[t].css({marginLeft:"-"+Y[t]+"%"})),O[t]=!1}),i(),o[t].trigger("cls-keyRight").trigger("cls-right")):37==e.keyCode?O[t]===!1&&x[t]===!0&&(O[t]=!0,n(),c[t].animate({marginLeft:"+=100%"},k[t],function(){M[t]--,M[t]<1&&(M[t]=D[t],c[t].css({marginLeft:"-"+J[t]+"%"})),O[t]=!1}),i(),o[t].trigger("cls-keyLeft").trigger("cls-left")):32==e.keyCode&&(1==v[t]?(p[t].hide(),m[t].show(),v[t]=!1,o[t].trigger("cls-pause"),n()):0==v[t]&&(p[t].show(),m[t].hide(),v[t]=!0,o[t].trigger("cls-play"),i()))}),v[t]===!0?m[t].hide():p[t].hide(),p[t].click(function(e){p[t].hide(),m[t].show(),v[t]=!1,o[t].trigger("cls-pause"),n()}),m[t].click(function(e){p[t].show(),m[t].hide(),v[t]=!0,o[t].trigger("cls-play"),i()}),i()})});