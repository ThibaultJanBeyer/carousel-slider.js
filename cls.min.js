/* -------------------------------------------------------------
The MIT License (MIT)
* VERSION: 0.1.0
* Copyright (c) 2015, Thibault Jan Beyer
* Website: http://www.thibaultjanbeyer.com/
* Example: http://kit.thibaultjanbeyer.com/tools/carousel-slider.js/
* Github: https://github.com/ThibaultJanBeyer/carousel-slider.js/
------------------------------------------------------------- */
$(function(){function t(){this.removeEventListener("touchmove",e),this.removeEventListener("touchend",t),r=!1}function e(e){if($.detectSwipe.preventDefault&&e.preventDefault(),r){var i,n=e.touches[0].pageX,s=e.touches[0].pageY,c=a-n,h=o-s;Math.abs(c)>=$.detectSwipe.threshold?i=c>0?"left":"right":Math.abs(h)>=$.detectSwipe.threshold&&(i=h>0?"down":"up"),i&&(t.call(this),$(this).trigger("swipe",i).trigger("swipe"+i))}}function i(i){1==i.touches.length&&(a=i.touches[0].pageX,o=i.touches[0].pageY,r=!0,this.addEventListener("touchmove",e,!1),this.addEventListener("touchend",t,!1))}function n(){this.addEventListener&&this.addEventListener("touchstart",i,!1)}$.detectSwipe={version:"2.1.1",enabled:"ontouchstart"in document.documentElement,preventDefault:!0,threshold:20};var a,o,r=!1;$.event.special.swipe={setup:n},$.each(["left","up","down","right"],function(){$.event.special["swipe"+this]={setup:function(){$(this).on("swipe",$.noop)}}});var s=[],c=[],h=[],d=[],f=[],l=[],u=[],p=[],m=[],g=[],w=[],L=[],v=[],S=[],z=[],A=[],b=[],k=[],y=[],x=[],E=[],I=[],D=[],T=[],C=[],Y=[],M=[],X=[],j=[],q=[],B=[],F=[];$(".carousel-slider").each(function(t,e){function i(){L[t]===!0&&(M[t]=setInterval(function(){X[t]=!0,c[t].animate({marginLeft:"-="+k[t]+"%"},v[t]/2).delay(v[t]/5).animate({marginLeft:"-="+y[t]+"%"},v[t],function(){Y[t]++,Y[t]<1?(Y[t]=x[t],c[t].css({marginLeft:"-"+C[t]+"%"})):Y[t]>x[t]&&(Y[t]=1,c[t].css({marginLeft:"-"+T[t]+"%"})),X[t]=!1})},S[t]))}function n(){clearInterval(M[t])}s[t]=$(this),c[t]=s[t].children(".inner"),h[t]=c[t].children(".slide"),d[t]=h[t].children(".content"),f[t]=s[t].children(".arrow"),l[t]=s[t].children(".arrow.left"),u[t]=s[t].children(".arrow.right"),m[t]=s[t].children(".play"),p[t]=s[t].children(".pause"),g[t]=s[t].attr("data-width"),w[t]=s[t].attr("data-height"),s[t].attr("data-autoplay")?L[t]=s[t].attr("data-autoplay"):L[t]=!0,s[t].attr("data-speed")?v[t]=parseInt(s[t].attr("data-speed")):v[t]=1e3,s[t].attr("data-time")?S[t]=parseInt(s[t].attr("data-time")):S[t]=7e3,s[t].attr("data-overflow")?z[t]=s[t].attr("data-overflow"):z[t]="auto",s[t].attr("data-swipe")?A[t]=s[t].attr("data-swipe"):A[t]=!0,s[t].css({width:g[t],height:w[t],position:"relative",overflow:"hidden"}),s[t].attr("tabindex","0"),x[t]=h[t].length,I[t]=x[t]-1,E=x[t]+4,D[t]=100*E,b[t]=100/E,T[t]=200,C[t]=100*(x[t]+1),Y[t]=1,c[t].css({margin:"0",marginLeft:"-"+T[t]+"%",display:"block",height:"100%",padding:"0",width:D[t]+"%"}),h[t].css({width:b[t]+"%",height:"100%",overflowY:z[t],"float":"left"}),h[t].width()<=200?(k[t]=20,clArrowSize=20):h[t].width()<=400?(k[t]=12,clArrowSize=35):h[t].width()>=1e3?(k[t]=4,clArrowSize=50):h[t].width()>=2e3?(k[t]=3,clArrowSize=55):h[t].width()>=3e3?(k[t]=2,clArrowSize=65):h[t].width()>=4e3?(k[t]=1,clArrowSize=65):h[t].width()>=5e3?(k[t]=.5,clArrowSize=70):(k[t]=5,clArrowSize=45),y[t]=100-k[t],f[t].css({width:clArrowSize+"px",height:"100%",position:"absolute",top:"0",zIndex:"5",cursor:"pointer",textAlign:"center"}),l[t].css({left:"0"}),u[t].css({right:"0"}),m[t].css({position:"absolute",right:clArrowSize+10+"px",bottom:0,cursor:"pointer"}),p[t].css({position:"absolute",right:clArrowSize+10+"px",bottom:0,cursor:"pointer"}),d[t].css({padding:"10px "+(clArrowSize+10)+"px"});var a;h[t].each(function(e,i){e++,1===e?$(this).clone().appendTo(c[t]):2===e&&$(this).clone().appendTo(c[t]),e===I[t]?a=$(this):e===x[t]&&($(this).clone().prependTo(c[t]),a.clone().prependTo(c[t]))}),X[t]=!1,j[t]=!1,q[t]=!1,l[t].on("mouseenter",function(){X[t]===!1&&j[t]===!1&&(j[t]=!0,n(),c[t].stop(!0,!0).animate({marginLeft:"+="+k[t]+"%"},v[t]/4))}).on("mouseleave",function(){q[t]=!0,X[t]===!1&&j[t]===!0&&(i(),c[t].stop(!0,!0).animate({marginLeft:"-="+k[t]+"%"},v[t]/4),j[t]=!1,q[t]=!1)}).on("click",function(){X[t]===!1&&j[t]===!0&&(X[t]=!0,c[t].animate({marginLeft:"+=100%"},v[t],function(){Y[t]--,Y[t]<1&&(Y[t]=x[t],c[t].css({marginLeft:"-"+(C[t]-k[t])+"%"})),q[t]&&(i(),c[t].animate({marginLeft:"-="+k[t]+"%"},v[t]/4),q[t]=!1,j[t]=!1),X[t]=!1}))}).on({touchstart:function(){j[t]=!0,n(),X[t]===!1&&j[t]===!0&&(X[t]=!0,c[t].animate({marginLeft:"+=100%"},v[t],function(){Y[t]--,Y[t]<1&&(Y[t]=x[t],c[t].css({marginLeft:"-"+C[t]+"%"})),i(),c[t],q[t]=!1,j[t]=!1,X[t]=!1}))}}),B[t]=!1,F[t]=!1,u[t].on("mouseenter",function(){X[t]===!1&&B[t]===!1&&(B[t]=!0,n(),c[t].stop(!0,!0).animate({marginLeft:"-="+k[t]+"%"},v[t]/4))}).on("mouseleave",function(){F[t]=!0,X[t]===!1&&B[t]===!0&&(i(),c[t].stop(!0,!0).animate({marginLeft:"+="+k[t]+"%"},v[t]/4),B[t]=!1,F[t]=!1)}).on("click",function(){X[t]===!1&&B[t]===!0&&(X[t]=!0,c[t].animate({marginLeft:"-=100%"},v[t],function(){Y[t]++,Y[t]>x[t]&&(Y[t]=1,c[t].css({marginLeft:"-"+(T[t]+k[t])+"%"})),F[t]&&(i(),c[t].animate({marginLeft:"+="+k[t]+"%"},v[t]/4),F[t]=!1,B[t]=!1),X[t]=!1}))}).on({touchstart:function(){B[t]=!0,n(),X[t]===!1&&B[t]===!0&&(X[t]=!0,c[t].animate({marginLeft:"-=100%"},v[t],function(){Y[t]++,Y[t]>x[t]&&(Y[t]=1,c[t].css({marginLeft:"-"+T[t]+"%"})),i(),c[t],F[t]=!1,B[t]=!1,X[t]=!1}))}}),h[t].on("swiperight",function(e){X[t]===!1&&A[t]===!0&&(n(),X[t]=!0,c[t].animate({marginLeft:"+=100%"},v[t],function(){Y[t]--,Y[t]<1&&(Y[t]=x[t],c[t].css({marginLeft:"-"+C[t]+"%"})),X[t]=!1}),i())}).on("swipeleft",function(){X[t]===!1&&A[t]===!0&&(n(),X[t]=!0,c[t].animate({marginLeft:"-=100%"},v[t],function(){Y[t]++,Y[t]>x[t]&&(Y[t]=1,c[t].css({marginLeft:"-"+T[t]+"%"})),X[t]=!1}),i())}),s[t].keydown(function(e){e.preventDefault(),39==e.keyCode?X[t]===!1&&A[t]===!0&&(X[t]=!0,n(),c[t].animate({marginLeft:"-=100%"},v[t],function(){Y[t]++,Y[t]>x[t]&&(Y[t]=1,c[t].css({marginLeft:"-"+T[t]+"%"})),X[t]=!1}),i()):37==e.keyCode?X[t]===!1&&A[t]===!0&&(X[t]=!0,n(),c[t].animate({marginLeft:"+=100%"},v[t],function(){Y[t]--,Y[t]<1&&(Y[t]=x[t],c[t].css({marginLeft:"-"+C[t]+"%"})),X[t]=!1}),i()):32==e.keyCode&&(1==L[t]?(p[t].hide(),m[t].show(),L[t]=!1,n()):0==L[t]&&(p[t].show(),m[t].hide(),L[t]=!0,i()))}),L[t]===!0?m[t].hide():p[t].hide(),p[t].click(function(e){p[t].hide(),m[t].show(),L[t]=!1,n()}),m[t].click(function(e){p[t].show(),m[t].hide(),L[t]=!0,i()}),i()})});