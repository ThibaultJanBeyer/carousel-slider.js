/* -------------------------------------------------------------
The MIT License (MIT)
* VERSION: 0.0.5
* Copyright (c) 2015, Thibault Jan Beyer
* Website: http://www.thibaultjanbeyer.com/
* Example: http://kit.thibaultjanbeyer.com/tools/carousel-slider/
* Github: https://github.com/ThibaultJanBeyer/carousel-slider.js/
------------------------------------------------------------- */
$(function(){function e(){this.removeEventListener("touchmove",t),this.removeEventListener("touchend",e),c=!1}function t(t){if($.detectSwipe.preventDefault&&t.preventDefault(),c){var n,i=t.touches[0].pageX,s=t.touches[0].pageY,r=a-i,h=o-s;Math.abs(r)>=$.detectSwipe.threshold?n=r>0?"left":"right":Math.abs(h)>=$.detectSwipe.threshold&&(n=h>0?"down":"up"),n&&(e.call(this),$(this).trigger("swipe",n).trigger("swipe"+n))}}function n(n){1==n.touches.length&&(a=n.touches[0].pageX,o=n.touches[0].pageY,c=!0,this.addEventListener("touchmove",t,!1),this.addEventListener("touchend",e,!1))}function i(){this.addEventListener&&this.addEventListener("touchstart",n,!1)}$.detectSwipe={version:"2.1.1",enabled:"ontouchstart"in document.documentElement,preventDefault:!0,threshold:20};var a,o,c=!1;$.event.special.swipe={setup:i},$.each(["left","up","down","right"],function(){$.event.special["swipe"+this]={setup:function(){$(this).on("swipe",$.noop)}}});var s=900,r=!0,h=7e3,f="auto",d=!0,u="vw",l="vh",m=[],g=[],p=[],v=[],L=[],w=[],k=[],E=[],b=[],y=[],S=[],T=[],x=[],C=[],D=[],I=[],Y=[],M=[],W=[],X=[],z=[],H=[],j=[],q=[];$(".carousel").each(function(e){function t(){r===!0&&(W[e]=setInterval(function(){X[e]=!0,g[e].animate({marginLeft:"-="+S[e]+u},s/2).delay(s/5).animate({marginLeft:"-="+T[e]+u},s,function(){M[e]++,M[e]<1?(M[e]=x[e],g[e].css({marginLeft:"-"+Y[e]+u})):M[e]>x[e]&&(M[e]=1,g[e].css({marginLeft:"-"+I[e]+u})),X[e]=!1})},h))}function n(){clearInterval(W[e])}m[e]=$(this),g[e]=m[e].children(".inner"),p[e]=g[e].children(".slide"),v[e]=m[e].children(".arrow"),L[e]=m[e].children(".arrow.left"),w[e]=m[e].children(".arrow.right"),E[e]=m[e].children(".play"),k[e]=m[e].children(".pause"),b[e]=m[e].attr("data-clWidth"),y[e]=m[e].attr("data-clHeight"),S[e]=b[e]/10,T[e]=b[e]-S[e],x[e]=p[e].length,C[e]=x[e]-1,D[e]=b[e]*(x[e]+4),I[e]=2*b[e],Y[e]=(x[e]+1)*b[e],M[e]=1,m[e].css({width:b[e]+u,height:y[e]+l,position:"relative",overflow:"hidden",background:"black"}),g[e].css({margin:"0",marginLeft:"-"+I[e]+u,display:"block",height:"100%",padding:"0",width:D[e]+u}),p[e].css({width:b[e]+u,height:y[e]+l,overflowY:f,"float":"left"}),v[e].css({width:S[e]+u,maxWidth:"100px",height:"100%",position:"absolute",top:"0",zIndex:"5",cursor:"pointer"}),L[e].css({left:"0"}),w[e].css({right:"0"});var i;p[e].each(function(t){t++,1===t?$(this).clone().appendTo(g[e]):2===t&&$(this).clone().appendTo(g[e]),t===C[e]?i=$(this):t===x[e]&&($(this).clone().prependTo(g[e]),i.clone().prependTo(g[e]))}),X[e]=!1,z[e]=!1,H[e]=!1,L[e].on("mouseenter",function(){X[e]===!1&&z[e]===!1&&(z[e]=!0,n(),g[e].stop(!0,!0).animate({marginLeft:"+="+S[e]+u},s/4))}).on("mouseleave",function(){H[e]=!0,X[e]===!1&&z[e]===!0&&(t(),g[e].stop(!0,!0).animate({marginLeft:"-="+S[e]+u},s/4),z[e]=!1,H[e]=!1)}).on("click",function(){X[e]===!1&&z[e]===!0&&(X[e]=!0,g[e].animate({marginLeft:"+="+b[e]+u},s,function(){M[e]--,M[e]<1&&(M[e]=x[e],g[e].css({marginLeft:"-"+(Y[e]-S[e])+u})),H[e]&&(t(),g[e].animate({marginLeft:"-="+S[e]+u},s/4),H[e]=!1,z[e]=!1),X[e]=!1}))}),j[e]=!1,q[e]=!1,w[e].on("mouseenter",function(){X[e]===!1&&j[e]===!1&&(j[e]=!0,n(),g[e].stop(!0,!0).animate({marginLeft:"-="+S[e]+u},s/4))}).on("mouseleave",function(){q[e]=!0,X[e]===!1&&j[e]===!0&&(t(),g[e].stop(!0,!0).animate({marginLeft:"+="+S[e]+u},s/4),j[e]=!1,q[e]=!1)}).on("click",function(){X[e]===!1&&j[e]===!0&&(X[e]=!0,g[e].animate({marginLeft:"-="+b[e]+u},s,function(){M[e]++,M[e]>x[e]&&(M[e]=1,g[e].css({marginLeft:"-"+(I[e]+S[e])+u})),q[e]&&(t(),g[e].animate({marginLeft:"+="+S[e]+u},s/4),q[e]=!1,j[e]=!1),X[e]=!1}))}),g[e].on("swiperight",function(){X[e]===!1&&d===!0&&(n(),X[e]=!0,g[e].animate({marginLeft:"+="+b[e]+u},s,function(){M[e]--,M[e]<1&&(M[e]=x[e],g[e].css({marginLeft:"-"+Y[e]+u})),X[e]=!1}),t())}).on("swipeleft",function(){X[e]===!1&&d===!0&&(n(),X[e]=!0,g[e].animate({marginLeft:"-="+b[e]+u},s,function(){M[e]++,M[e]>x[e]&&(M[e]=1,g[e].css({marginLeft:"-"+I[e]+u})),X[e]=!1}),t())}),document.addEventListener("keydown",function(i){39==i.keyCode?X[e]===!1&&d===!0&&(X[e]=!0,n(),g[e].animate({marginLeft:"-="+b[e]+u},s,function(){M[e]++,M[e]>x[e]&&(M[e]=1,g[e].css({marginLeft:"-"+I[e]+u})),X[e]=!1}),t()):37==i.keyCode?X[e]===!1&&d===!0&&(X[e]=!0,n(),g[e].animate({marginLeft:"+="+b[e]+u},s,function(){M[e]--,M[e]<1&&(M[e]=x[e],g[e].css({marginLeft:"-"+Y[e]+u})),X[e]=!1}),t()):32==i.keyCode&&(1==r?(k[e].hide(),E[e].show(),r=!1,n()):0==r&&(k[e].show(),E[e].hide(),r=!0,t()))}),r?E[e].hide():k[e].hide(),k[e].click(function(){k[e].hide(),E[e].show(),r=!1,n()}),E[e].click(function(){k[e].show(),E[e].hide(),r=!0,t()}),t()})});
